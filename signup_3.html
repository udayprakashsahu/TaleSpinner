<!DOCTYPE html>
<html lang="en">
<!-- FINAL SIGNUP PAGE SO FAR -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Page</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="signup.css">

</head>

<body>
    <div class="container">
        <h2 class="text-center mb-4">Sign Up</h2>
        <div class="constraints">Note: All fields are required.</div><br>
        <form id="signupForm" onsubmit="return goToHome()">
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <input type="text" class="form-control" id="firstName" placeholder="First Name" required>
                        <!-- <small class="constraints">*Required</small> -->
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <input type="text" class="form-control" id="lastName" placeholder="Last Name" required>
                        <!-- <small class="constraints">*Required</small> -->
                    </div>
                </div>
            </div>
            <div class="form-group">
                <input type="email" class="form-control" id="email" placeholder="Email" required>
                <!-- <small class="constraints">*Required</small> -->
            </div>
            <div class="form-group">
                <input type="tel" class="form-control" id="phoneNumber" placeholder="Phone Number" required>
                <small class="constraints">*Must contain only 10 digits</small>
            </div>
            <div class="form-group">
                <div>
                    Gender:
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="gender" id="male" value="male" required>
                    <label class="form-check-label" for="male">Male</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="gender" id="female" value="female">
                    <label class="form-check-label" for="female">Female</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="gender" id="other" value="other">
                    <label class="form-check-label" for="other">Other</label>
                </div> <br>
                <!-- <small class="constraints">*Required</small> -->
            </div>
            <div class="form-group">
                <label for="dob">Date of Birth:</label>
                <input type="date" class="form-control" id="dob">
            </div>
            <div class="form-group">
                <input type="text" class="form-control" id="userID" placeholder="User ID" required>
                <!-- <small class="constraints">*Required</small> -->
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="password" placeholder="Password" required>
                <small class="constraints">*Should contain at least 1 letter, 1 number, 1 special character</small>
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm Password"
                    required>
                <small class="constraints"></small>
            </div>
            <button type="submit" class="btn btn-block">Signup</button>
        </form>
        <div class="text-center mt-3">
            Already a user? Click <a href="login_3.html">here</a> to login.
        </div>
    </div>

    <script>
        function validateForm() {
            var firstName = document.getElementById('firstName').value.trim();
            var lastName = document.getElementById('lastName').value.trim();
            var email = document.getElementById('email').value.trim();
            var phoneNumber = document.getElementById('phoneNumber').value.trim();
            var gender = document.querySelector('input[name="gender"]:checked');
            var userID = document.getElementById('userID').value.trim();
            var password = document.getElementById('password').value.trim();
            var confirmPassword = document.getElementById('confirmPassword').value.trim();
            var dob = document.getElementById('dob').value;

            //Basic validation
            if (firstName === '' || lastName === '' || email === '' || phoneNumber === '' || !gender || userID === '' || password === '' || confirmPassword === '') {
                alert('All fields are required');
                return false;
            }

            //Name validation
            var namePattern = /^[a-zA-Z]+$/;
            if (!namePattern.test(firstName) || !namePattern.test(lastName)) {
                alert('First and Last Name should contain only letters');
                return false;
            }

            //Email validation
            var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                alert('Invalid email address');
                return false;
            }

            //Phone number validation
            if (!(/^\d{10}$/.test(phoneNumber))) {
                alert('Phone number must have exactly 10 digits');
                return false;
            }

            //Date of Birth validation (optional)
            if (dob !== '') {
                var today = new Date();
                var selectedDate = new Date(dob);
                if (selectedDate > today) {
                    alert('Date of Birth cannot be in the future');
                    return false;
                }
            }

            //Password validation
            var passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;
            if (!passwordPattern.test(password)) {
                alert('Password must contain at least 1 letter, 1 number, 1 special character, and be at least 8 characters long');
                return false;
            }

            //Confirm password validation
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return false;
            }
            return true;
        }
        function goToHome() {
        var signup = validateForm();
        if (signup) {
            console.log('Redirecting to index.html...');
            setTimeout(function() {
                window.location= "index.html";
            }, 1000); 
        }
        return false; // Prevent form submission
    }

    </script>
</body>

</html>